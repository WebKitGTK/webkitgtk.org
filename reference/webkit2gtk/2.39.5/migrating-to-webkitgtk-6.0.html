<!--
SPDX-FileCopyrightText: 2021 GNOME Foundation

SPDX-License-Identifier: Apache-2.0 OR GPL-3.0-or-later
-->

<!--
SPDX-FileCopyrightText: 2021 GNOME Foundation

SPDX-License-Identifier: Apache-2.0 OR GPL-3.0-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>WebKit2 &ndash; 4.1: Migrating WebKitGTK Applications to GTK 4</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  

  
  <meta property="og:title" content="WebKit2: Migrating WebKitGTK Applications to GTK 4"/>
  <meta property="og:description" content="Reference for WebKit2-4.1: Migrating WebKitGTK Applications to GTK 4"/>
  <meta name="twitter:title" content="WebKit2: Migrating WebKitGTK Applications to GTK 4"/>
  <meta name="twitter:description" content="Reference for WebKit2-4.1: Migrating WebKitGTK Applications to GTK 4"/>


  
  <meta name="twitter:card" content="summary"/>

  
  
  
  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>
  <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">WebKit2</a></h3>
        <p>API Version: 4.1</p>
        
        <p>Library Version: 2.39.5</p>
        
      </div>
      
      
    </nav>
    
    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  <section>
    <div class="docblock">
    <h1 id="migrating-webkitgtk-applications-to-gtk-4">Migrating WebKitGTK Applications to GTK 4<a class="md-anchor" href="#migrating-webkitgtk-applications-to-gtk-4" title="Permanent link"></a></h1>
<p>This document contains guidance to application developers looking to migrate
applications that use WebKitGTK from <span class="caps">GTK</span> 3 to <span class="caps">GTK</span>&nbsp;4.</p>
<p>webkitgtk-6.0 is a new <span class="caps">API</span> version of WebKitGTK designed for use with <span class="caps">GTK</span> 4 and
libsoup 3. This <span class="caps">API</span> version obsoletes webkit2gtk-4.0 and webkit2gtk-4.1, the
<span class="caps">GTK</span> 3 <span class="caps">API</span> versions for libsoup 2 and libsoup 3, respectively. It also obsoletes
webkit2gtk-5.0, which was an earlier unstable <span class="caps">API</span> version for <span class="caps">GTK</span>&nbsp;4.</p>
<p>libsoup 2 and libsoup 3 cannot be linked together. If your application currently
uses webkit2gtk-4.0, you must first port to webkit2gtk-4.1 by eliminating use
of libsoup 2. See <a href="https://libsoup.org/libsoup-3.0/migrating-from-libsoup-2.html">Migrating from libsoup 2</a>
for guidance on this. After first migrating to webkit2gtk-4.1, then it is
time to start looking into&nbsp;webkitgtk-6.0.</p>
<h2 id="mandatory-web-process-sandbox">Mandatory Web Process Sandbox<a class="md-anchor" href="#mandatory-web-process-sandbox" title="Permanent link"></a></h2>
<p>The <code>webkit_web_context_set_sandbox_enabled()</code> and <code>webkit_web_context_get_sandbox_enabled()</code>
functions have been removed. The web process sandbox is now always enabled. If
your application&#8217;s web process needs to access extra directories, use
WebKit.WebContext.add_path_to_sandbox to mount them in the&nbsp;sandbox.</p>
<h2 id="mandatory-process-swap-on-cross-site-navigation">Mandatory Process Swap on Cross-site Navigation<a class="md-anchor" href="#mandatory-process-swap-on-cross-site-navigation" title="Permanent link"></a></h2>
<p>The <code>WebKitWebContext:process-swap-on-cross-site-navigation-enabled</code> property
has been removed. Process swapping is now mandatory. Your application should be
prepared for the web view&#8217;s web process to be replaced when navigating between
different security origins. You can ensure that your application is prepared for
this change before porting to <span class="caps">GTK</span> 4 by testing your application with the
<code>WebKitWebContext:process-swap-on-cross-site-navigation-enabled</code> property
enabled. This property was previously disabled by&nbsp;default.</p>
    </div>
  </section>
</section>


    
<div id="toc" class="toc">
  <nav aria-labelledby="toc-title">
    <p id="toc-title">Content</p>
    <ul class="toc-list">
      
        
        <li class="toc-list-item"><a href="#mandatory-web-process-sandbox"><span class="link-text">Mandatory Web Process Sandbox</span></a></li>
        
        <li class="toc-list-item"><a href="#mandatory-process-swap-on-cross-site-navigation"><span class="link-text">Mandatory Process Swap on Cross-site Navigation</span></a></li>
        
      
    </ul>
  </nav>
</div>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>